version: 1

# Source of truth for generating vertical YAMLs + rebuilding verticals.json index.
# Goal: deterministic generation, no duplicates, backward-compatible with default_queries.

defaults:
  enabled: true
  language_allowlist: ["en"]
  min_signal_quality: 0.2
  ingestion:
    sources:
      - name: reddit
        limit: 80
      - name: hackernews
        limit: 80
      - name: indiehackers
        limit: 80

# High-level classification (used to build tags + titles + queries)
segments:
  b2b:
    label: "B2B"
    tags: ["b2b"]
  b2c:
    label: "B2C"
    tags: ["b2c"]

functions:
  ops:
    label: "Operations"
    tags: ["ops"]
    subdomains:
      - id: billing
        label: "Billing"
        keywords: ["billing", "invoicing", "payments", "subscriptions"]
      - id: expenses
        label: "Expenses"
        keywords: ["expense management", "reimbursements", "receipts", "approval workflows"]
      - id: procurement
        label: "Procurement"
        keywords: ["procurement", "purchase orders", "vendor approvals", "supplier management"]
      - id: logistics
        label: "Logistics"
        keywords: ["shipping", "tracking", "carrier", "warehouse", "fulfillment"]
      - id: support
        label: "Customer Support"
        keywords: ["support tickets", "helpdesk", "SLA", "knowledge base", "triage"]
      - id: compliance
        label: "Compliance"
        keywords: ["compliance", "audit", "controls", "risk", "policy management"]

  dev:
    label: "Engineering"
    tags: ["dev"]
    subdomains:
      - id: devops
        label: "DevOps"
        keywords: ["CI/CD", "deployments", "pipelines", "infra as code"]
      - id: observability
        label: "Observability"
        keywords: ["logs", "metrics", "tracing", "alerts", "SLO"]
      - id: backend
        label: "Backend"
        keywords: ["APIs", "databases", "queues", "performance"]
      - id: frontend
        label: "Frontend"
        keywords: ["React", "Next.js", "UI performance", "design systems"]
      - id: testing
        label: "Testing"
        keywords: ["e2e testing", "Playwright", "test flakiness", "coverage"]

  sales:
    label: "Sales"
    tags: ["sales"]
    subdomains:
      - id: outbound
        label: "Outbound"
        keywords: ["cold email", "prospecting", "lead lists", "deliverability"]
      - id: pipeline
        label: "Pipeline"
        keywords: ["CRM", "pipeline", "forecasting", "deal stages"]
      - id: enablement
        label: "Enablement"
        keywords: ["sales playbooks", "battlecards", "onboarding", "training"]
      - id: revops
        label: "RevOps"
        keywords: ["revops", "routing", "attribution", "handoffs", "SLAs"]

  marketing:
    label: "Marketing"
    tags: ["marketing"]
    subdomains:
      - id: seo
        label: "SEO"
        keywords: ["SEO", "content briefs", "topic clusters", "SERP tracking"]
      - id: paid
        label: "Paid"
        keywords: ["paid ads", "CPC", "ROAS", "landing pages", "tracking"]
      - id: lifecycle
        label: "Lifecycle"
        keywords: ["email marketing", "onboarding", "retention", "drip campaigns"]
      - id: social
        label: "Social"
        keywords: ["social media", "content calendar", "repurposing", "short-form"]

industries:
  - id: healthcare
    label: "Healthcare"
    tags: ["industry", "healthcare"]
    keywords: ["HIPAA", "clinics", "patient scheduling", "medical billing"]
  - id: fintech
    label: "Fintech"
    tags: ["industry", "fintech"]
    keywords: ["KYC", "fraud", "compliance", "payments", "risk"]
  - id: retail
    label: "Retail"
    tags: ["industry", "retail"]
    keywords: ["POS", "inventory", "pricing", "loss prevention"]
  - id: logistics
    label: "Logistics"
    tags: ["industry", "logistics"]
    keywords: ["freight", "tracking", "warehouse", "carrier"]
  - id: construction
    label: "Construction"
    tags: ["industry", "construction"]
    keywords: ["field teams", "permits", "change orders", "scheduling"]
  - id: education
    label: "Education"
    tags: ["industry", "education"]
    keywords: ["LMS", "enrollment", "student support", "scheduling"]

# How we generate verticals
generation:
  # total desired count (compiler will only add missing; won't delete existing)
  target_count: 1000

  # candidate families
  families:
    # cross product: segment x function.subdomain
    - kind: function
      segments: ["b2b", "b2c"]
      functions: ["ops", "dev", "sales", "marketing"]

    # industry verticals: segment(b2b) x industry (optionally add a function tag)
    - kind: industry
      segments: ["b2b"]
      industries: ["healthcare", "fintech", "retail", "logistics", "construction", "education"]
      function_hint: "ops"

  # query rules (deterministic)
  queries:
    max_per_vertical: 6
    # generic pain phrases appended to keywords
    suffixes:
      - "workflow"
      - "tooling"
      - "automation"
      - "pain points"
      - "process"
